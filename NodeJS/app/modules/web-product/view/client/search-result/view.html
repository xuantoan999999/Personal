<div id="mod-category" class="module" data-module="category" data-ng-controller="categoryCtrl as vmCategory">
    <div class="container">
        {{#each banner_top_item}}
        <div class="banner">
            <a href="{{this.link}}">
                <img src="/files/banner_image/{{this.image}}" class="img-responsive" alt="">
            </a>
        </div>
        {{/each}}

        <div class="row">
            <!--Start: Left Sidebar-->
            <div class="col-xs-4 col-left">
                <!--Start: List category-->
                {{#if data.categories.category.status}}
                <div class="vegetables">
                    <h3>{{data.categories.category.name}}</h3>
                    <ul class="list-menu">
                        {{#each data.categories.sub_category}}
                        {{#if this.category.status}}
                        <li class="{{#if_eq this.category.slug ../data.category.slug}}active{{/if_eq}} {{#if_eq this.category.slug ../data.category.parent_category.slug}}active{{/if_eq}}">
                            <b class="is-open"></b>
                            <a href="/danh-muc/{{../data.categories.category.slug}}/{{this.category.slug}}" class="{{#if_eq this.category.slug ../data.category.slug}}active{{/if_eq}}">
                                <span>{{this.category.name}}</span>
                                <span>({{this.product_count}})</span>
                            </a>
                            {{#if this.sub_category}}
                            <ul>
                                {{#each this.sub_category}}
                                {{#if this.category.status}}
                                <li>
                                    <a href="/danh-muc/{{../../data.categories.category.slug}}/{{this.category.slug}}" class="{{#if_eq this.category.slug ../../data.category.slug}} active {{/if_eq}}">{{this.category.name}} <span>({{this.product_count}})</span></a>
                                </li>
                                {{/if}}
                                {{/each}}
                            </ul>
                            {{/if}}
                        </li>
                        {{/if}}
                        {{/each}}
                    </ul>
                </div>
                {{/if}}
                <!--End: List category-->

                <!--Start: List cooking-->
                <div class="cooking">
                    <h3>Cách nấu thông dụng </h3>
                    {{#each data.tag_processing}}
                    <div class="form-group">
                        <label for="{{this._id}}" role="checkbox">
                            <input type="checkbox" id="{{this._id}}" data-ng-model="tagProcessings[{{@index}}]" data-ng-change="filterTag(); reloadPage();" value="{{index}}">{{this.name}} <i></i>
                            <span>({{this.proccesing.length}})</span>
                        </label>
                    </div>
                    {{/each}}
                </div>
                <!--End: List cooking-->
            </div>
            <!--End: Left Sidebar-->

            <!--Start: Right content-->
            <div class="col-xs-20 col-right">

                {{#if data.product_find}}
                <!--Start : Tree link-->
                <div class="tree-link">
                    <a href="/">Trang chủ</a>
                    <span>
                        <img src="{{ linkAssets 'frontend/images/icon-navigation.png' }}" class='img-responsive' alt="">
                    </span>
                    <a href="">
                        Tìm kiếm
                    </a>
                </div>
                <!--End: Tree link-->
                {{/if}}

                <!--Start: Content-->
                <div class="search-result {{#unless data.product_find}} no-search {{/unless}}">
                    <!--Start: Top menu-->

                    <h1>
                        "{{data.search}}" 
                        {{#if data.product_find}}
                        <span class="many-proc">
                            - Tìm thấy {{data.products.length}} sản phẩm
                        </span>
                        {{else}}
                        <span class="many-proc">
                            - Tìm thấy 0 sản phẩm
                        </span>
                        {{/if}}
                    </h1>

                    {{#unless data.product_find}}
                    <div class="content-nosearch">
                        <div class="image">
                            <img src="{{ linkAssets 'frontend/images/icon-no-search.png' }}" class="img-responsive" alt="">
                        </div>
                        <span class="many-proc">Không tìm thấy sản phẩm nào với từ khoá “{{data.search}}”</span>
                        </div>
                    <h5>Có thể bạn quan tâm</h5>
                    {{/unless}}

                    {{#if data.product_find}}
                    <div class="form-group">
                        <div class="filter">
                            <select data-ng-model="sort_tag" class="selectbox" data-ng-change="sortTag(); reloadPage();">
                                {{#each data.tag_product}}
								<option value="{{@index}}">{{this.name}}</option>
                                {{/each}}
							</select>
                        </div>
                    </div>
                    {{/if}}
                    <div class="clearfix"></div>
                    <!--End: Top menu-->

                    {{> web/partials/category/products_list}}
                </div>
                <!--End: Content-->
            </div>
            <!--End: Right content-->
        </div>
        <div class="button"></div>
    </div>
</div>

<script>
    var products_length = {{{json data.products.length}}};
    var tag_processing = {{{json data.tag_processing}}};
    var ga_category = {{{json ga_category}}};
    var pageGa = {{{json ga_category}}};
</script>